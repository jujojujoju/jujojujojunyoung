<script>

    //    function numberCounter(target_number, callback) {
    //
    //        $('#loading_percent').text('0%');
    //        this.count = 0;
    //        this.diff = 0;
    //        this.target_count = parseInt(target_number);
    //        this.timer = null;
    //        this.counter(callback);
    //    }
    //
    //    numberCounter.prototype.counter = function(callback) {
    //        console.log(typeof(callback));
    //        console.log(this.count);
    //
    //        var self = this;
    //        this.diff = this.target_count - this.count;
    //
    //        if (this.diff > 0) {
    //            self.count += Math.ceil(this.diff / 5);
    //        }
    //
    //        $('#loading_percent').text(this.count.toString() + '%');
    //
    //        if (this.count < this.target_count) {
    //            this.timer = setTimeout(function () {
    //                counter(callback);
    //            }, Math.floor(Math.random() * 100));
    //        } else {
    //            clearTimeout(this.timer);
    //            callback(1);
    //        }
    //    }

    var count = 0;
    function percentCounter(callback) {
        count += Math.ceil((100 - count) / 5);

        $('#loading_percent').text(count + '%');

        if (count < 100) {
            setTimeout(function () {
                percentCounter(callback);
            }, Math.floor(Math.random() * 200));

        } else {
            count = 0;
            callback(1);
        }
    }

    $(document).ready(function () {

        percentCounter(function () {
            $('#loading_text_1').hide();
            $('#loading_text_2').fadeIn();

            percentCounter(function(){
                $('#loading_text_2').hide();
                $('#loading_text_3').fadeIn();

                percentCounter(function(){
                    $('#loading_text_3').hide();
                    $('#loading_text_4').fadeIn();
                    $('#loading_percent').hide();
                    $('#loading_division').text('1/3');
                    $('#loading_division').show();

                    percentCounter(function(){
                        $('#loading_division').hide();
                        $('#loading_percent').show();
                        $('#loading_text_4').hide();
                        $('#loading_text_5').fadeIn();

                        percentCounter(function(){
                            $('#loading_text_5').hide();
                            $('#loading_text_6').fadeIn();

                            percentCounter(function(){
                                $('#loading_text_6').hide();
                                $('#loading_text_7').fadeIn();
                                $('#loading_percent').hide();
                                $('#loading_division').text('2/3');
                                $('#loading_division').show();

                                percentCounter(function(){
                                    $('#loading_division').hide();
                                    $('#loading_percent').show();
                                    $('#loading_text_7').hide();
                                    $('#loading_text_8').fadeIn();

                                    percentCounter(function(){
                                        $('#loading_text_8').hide();
                                        $('#loading_text_9').fadeIn();

                                        $('.spinner').hide();

                                        if(confirm("분석완료! 확인하시겠습니까?")){
                                            location.href='/hp';
                                        } else {

                                        }
                                        // 리다이렉트
                                    })
                                })

                            })
                        })

                    })
                })
            })
        });

    })


</script>